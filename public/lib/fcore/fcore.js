String.prototype.trim=function(){return this.replace(/(^\s*)|(\s*$)/g,"")};Number.prototype.format=function(t,e,p){if(typeof(e)=="boolean"){p=e;e=2}else{if(e==undefined||isNaN(e)){e=2}if(p==undefined||typeof(p)!="boolean"){p=false}}return this.toString().format(t,e,p)};String.prototype.format=function(t,e,p){var rst=parseFloat(this.replace(/\,/g,""));if(typeof(e)=="boolean"){p=e;e=2}else{if(e==undefined||isNaN(e)){e=2}if(p==undefined||typeof(p)!="boolean"){p=false}}p=p&&rst>0;switch(t){case"N":rst=rst.toFixed(e).toString();rst=rst.indexOf(".")==-1?rst.replace(/(\d{1,3})(?=(\d{3})+(?:$))/g,"$1,"):rst.replace(/(\d{1,3})(?=(\d{3})+(?:\.))/g,"$1,");break;case"P":rst=(rst*100).toFixed(e)+"%";break;default:rst=rst.toFixed(e);break}if(p){rst="+"+rst}return rst};Array.prototype.remove=function(dx){if(isNaN(dx)||dx>this.length){return false}for(var i=0,n=0;i<this.length;i++){if(this[i]!=this[dx]){this[n++]=this[i]}}this.length-=1};(function($){$.fn.extend({clearHtml:function(){this.each(function(){$(this).html($(this).html().replace(/<.*?>/gi,""))});return $(this)},disable:function(b){$(this).attr("disabled",b);return $(this)},center:function(){var wh=$(window).height();var ww=$(window).width();var wst=$(window).scrollTop();var wsl=$(window).scrollLeft();var t;this.each(function(){t=$(this);t.css({position:"absolute",top:(wh-t.height())/2+wst+"px",left:(ww-t.width())/2+wsl+"px"})});return $(this)}})})(jQuery);var FCore=FCore||{};FCore={Ajax:{_base_:function(url,parms,type,async,fnSucess,fnError){$.ajax({type:type,url:url,data:parms,dataType:"json",async:async,success:fnSucess,error:function(err){if(fnError){fnError(err)}else{console.log(err.responseText)}}})},Post:function(url,parms,fnSucess,fnError){FCore.Ajax._base_(url,parms,"POST",true,fnSucess,fnError)},Get:function(url,parms,fnSucess,fnError){FCore.Ajax._base_(url,parms,"GET",true,fnSucess,fnError)},PostSync:function(url,parms,fnSucess,fnError){FCore.Ajax._base_(url,parms,"POST",false,fnSucess,fnError)},GetSync:function(url,parms,fnSucess,fnError){FCore.Ajax._base_(url,parms,"GET",false,fnSucess,fnError)}},ContextMenuForbid:function(){$(document).bind("contextmenu",function(e){return false})},FrameReload:function(frameID){document.getElementById(frameID).src=document.getElementById(frameID).src},GetSelectedItems:function(id){var rst=$();var opts=document.getElementById(id).options;var len=opts.length;for(i=0;i<len;i++){if(opts[i].selected){rst=rst.add(opts[i])}}return rst},GetSelectedText:function(id){var sel=document.getElementById(id);return $(sel.options[sel.selectedIndex]).text()},WebMethodAsync:function(url,data,onResult,onError){if($.isFunction(data)){onErro=onResult;onResult=data;data={}}$.ajax({type:"POST",contentType:"application/json",url:url,data:data,dataType:"json",success:onResult,error:onError})},WebMethod:function(url,data){if($.isFunction(data)){onErro=onResult;onResult=data;data={}}var rst=$.ajax({type:"POST",contentType:"application/json",url:url,data:data,dataType:"json",async:false}).responseText;rst=$.parseJSON(rst);if(rst.d==undefined){alert(rst.Message+" URL:"+url)}return $.parseJSON(rst.d)},Request:(function(){var _rst=new Object();try{var _ps=window.location.search.replace("?","");if(_ps.length>0){var _p=_ps.split("&");for(var i=0;i<_p.length;i++){var _t=_p[i].split("=");_rst[_t[0]]=_t[1]}}}catch(e){}return _rst})(),Round:function(num,e){var t=1;for(;e>0;t*=10,e--){}for(;e<0;t/=10,e++){}return Math.round(num*t)/t},SetCenter:function($target){$target.center()},Val:function(id){return document.getElementById(id).value},WindowCloseConfirm:function(s){window.onbeforeunload=function(){return s}},GUID:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){var r=Math.random()*16|0,v=c=="x"?r:(r&3|8);return v.toString(16)})},HasRepeat:function(arr){var rst=false;var arr=arr.sort();for(var i=0;i<arr.length;i++){if(arr[i]==arr[i+1]){rst=true;break}}return rst}};var FCore=FCore||{};FCore.Verify={IsInt:function(str){return/^\d+$/.test(str)},IsNum:function(str){return/^\d+\.?\d*$/.test(str)},IsEmail:function(str){return/^\w+[\w\d\.]*@([\w\d]\.){1,}[\w\d]+$/i.test(str)},IsMobilePhone:function(str){return/^1\d{10}$/.test(str)},IsDate:function(str){return /^\d{4}-(0\d|1[012])-([012]\d|3[01])$/.test(str)},IsUrl:function(str){return /^(http(s)?|ftp)\:\/\/[\w-]+(([\w-]\.?)*\/?)*\#?\??.*$/.test(str)},};var FCore=FCore||{};FCore.Debug={_t1:new Date(),TimeStart:function(){FCore.Debug._t1=new Date()},LostTime:function(){return new Date()-FCore.Debug._t1},ShowLostTime:function(){console.log(FCore.Debug.LostTime())}};var FCore=FCore||{};FCore.Convert={JsonToString:function(json){if(JSON){return JSON.stringify(json)}else{var arr=[];var fmt=function(s){if(typeof s=="object"&&s!=null){return FCore.Convert.JsonToString(s)}return/^(string)$/.test(typeof s)?'"'+s.replace('"','\\"')+'"':s};for(var i in json){arr.push('"'+i+'":'+fmt(json[i]))}return"{"+arr.join(",")+"}"}},StringToJson:function(s){return(new Function("return "+s))()},ToInt:function(s){s=parseInt(s,10);return s==NaN?0:s},ToFloat:function(s){s=parseFloat(s);return s==NaN?0:s},ToDate:function(s){try{if(isNaN(s)){return new Date(s.replace(/-/gi,"/"))}else{s=s.toString()+"0000000000";s=s.substr(0,13);s=parseInt(s);var d=new Date();d.setTime(s);return d}}catch(e){return undefined}}};var FCore=FCore||{};FCore.Date={IsLeapYear:function(year){return(year%400==0)||(year%100!=0)&&(year%4==0)},AddDays:function(date,days){try{if(typeof(date)!="object"){date=FCore.Convert.ToDate(date)}return new Date(date.valueOf()+days*24*60*60*1000)}catch(e){return undefined}},AddMonths:function(date,months){try{if(typeof(date)!="object"){date=FCore.Convert.ToDate(date)}var y,m,d,a;a=[31,28,31,30,31,30,31,31,30,31,30,31];y=date.getFullYear();m=date.getMonth()+1;d=date.getDate();if(months>=12||months<=12){y+=months/12;months=months%12}m=m+months;if(m>12){y++;m-=12}if(m<1){y--;m+=12}if(this.IsLeapYear(y)){a[1]=29}if(d>a[m-1]){d=a[m-1]}return new Date(y,m-1,d)}catch(e){return undefined}},AddYears:function(date,years){if(typeof(date)!="object"){date=FCore.Convert.ToDate(date)}var y,m,d,a;a=28;y=date.getFullYear()+years;m=date.getMonth()+1;d=date.getDate();if(this.IsLeapYear(y)){a=29}if(m==2&&d>a){d=a}return new Date(y,m-1,d)},DiffDays:function(d1,d2){var day=24*60*60*1000;try{return(FCore.Convert.ToDate(d2).getTime()-FCore.Convert.ToDate(d1).getTime())/day}catch(e){return undefined}},DiffMonths:function(d1,d2){if(typeof(d1)!="object"){d1=FCore.Convert.ToDate(d1)}if(typeof(d2)!="object"){d2=FCore.Convert.ToDate(d2)}return(d2.getFullYear()-d1.getFullYear())*12+(d2.getMonth()-d1.getMonth())},DiffYears:function(d1,d2){if(typeof(d1)!="object"){d1=FCore.Convert.ToDate(d1)}if(typeof(d2)!="object"){d2=FCore.Convert.ToDate(d2)}return d2.getFullYear()-d1.getFullYear()},Format:function(date,fmt){try{if(typeof(date)!="object"){date=FCore.Convert.ToDate(date)}var yyyy,MM,dd,hh,mm,ss,mi,yy,M,d,h,m,s;yyyy=date.getFullYear();M=date.getMonth()+1;d=date.getDate();h=date.getHours();m=date.getMinutes();s=date.getSeconds();mi=date.getMilliseconds();yy=yyyy.toString().substring(2,4);MM=M>9?M:"0"+M;dd=d>9?d:"0"+d;hh=h>9?h:"0"+h;mm=m>9?m:"0"+m;ss=s>9?s:"0"+s;fmt=fmt.replace("yyyy",yyyy);fmt=fmt.replace("MM",MM);fmt=fmt.replace("dd",dd);fmt=fmt.replace("hh",hh);fmt=fmt.replace("mm",mm);fmt=fmt.replace("ss",ss);fmt=fmt.replace("mi",mi);fmt=fmt.replace("yy",yy);fmt=fmt.replace("M",M);fmt=fmt.replace("d",d);fmt=fmt.replace("h",h);fmt=fmt.replace("m",m);fmt=fmt.replace("s",s)}catch(e){fmt=undefined}return fmt},GetWeekName:function(date){if(typeof(date)!="object"){date=FCore.Convert.ToDate(date)}return["星期日","星期一","星期二","星期三","星期四","星期五","星期六"][date.getDay()]},GetMilliseconds:function(date){var d=new Date();if(date){if(typeof(date)!="object"){date=FCore.Convert.ToDate(date)}d=date}return d.getTime()}};Date.prototype.Format=function(fmt){return FCore.Date.Format(this,fmt)};Date.prototype.AddDays=function(days){return FCore.Date.AddDays(this,days)};Date.prototype.AddMonths=function(months){return FCore.Date.AddMonths(this,months)};Date.prototype.AddYears=function(years){return FCore.Date.AddYears(this,years)};Date.prototype.GetWeekName=function(){return FCore.Date.GetWeekName(this)};var FCore=FCore||{};FCore.Md5={__hexcase:0,__b64pad:"",__chrsz:8,Encrypt:function(s){return FCore.Md5.hex_md5(s)},hex_md5:function(s){return FCore.Md5.binl2hex(FCore.Md5.core_md5(FCore.Md5.str2binl(s),s.length*FCore.Md5.__chrsz))},b64_md5:function(s){return FCore.Md5.binl2b64(FCore.Md5.core_md5(FCore.Md5.str2binl(s),s.length*FCore.Md5.__chrsz))},hex_hmac_md5:function(key,data){return FCore.Md5.binl2hex(FCore.Md5.core_hmac_md5(key,data))},b64_hmac_md5:function(key,data){return FCore.Md5.binl2b64(FCore.Md5.core_hmac_md5(key,data))},calcMD5:function(s){return FCore.Md5.binl2hex(FCore.Md5.core_md5(FCore.Md5.str2binl(s),s.length*FCore.Md5.__chrsz))},core_md5:function(x,len){x[len>>5]|=128<<((len)%32);x[(((len+64)>>>9)<<4)+14]=len;var a=1732584193;var b=-271733879;var c=-1732584194;var d=271733878;for(var i=0;i<x.length;i+=16){var olda=a;var oldb=b;var oldc=c;var oldd=d;a=FCore.Md5.md5_ff(a,b,c,d,x[i+0],7,-680876936);d=FCore.Md5.md5_ff(d,a,b,c,x[i+1],12,-389564586);c=FCore.Md5.md5_ff(c,d,a,b,x[i+2],17,606105819);b=FCore.Md5.md5_ff(b,c,d,a,x[i+3],22,-1044525330);a=FCore.Md5.md5_ff(a,b,c,d,x[i+4],7,-176418897);d=FCore.Md5.md5_ff(d,a,b,c,x[i+5],12,1200080426);c=FCore.Md5.md5_ff(c,d,a,b,x[i+6],17,-1473231341);b=FCore.Md5.md5_ff(b,c,d,a,x[i+7],22,-45705983);a=FCore.Md5.md5_ff(a,b,c,d,x[i+8],7,1770035416);d=FCore.Md5.md5_ff(d,a,b,c,x[i+9],12,-1958414417);c=FCore.Md5.md5_ff(c,d,a,b,x[i+10],17,-42063);b=FCore.Md5.md5_ff(b,c,d,a,x[i+11],22,-1990404162);a=FCore.Md5.md5_ff(a,b,c,d,x[i+12],7,1804603682);d=FCore.Md5.md5_ff(d,a,b,c,x[i+13],12,-40341101);c=FCore.Md5.md5_ff(c,d,a,b,x[i+14],17,-1502002290);b=FCore.Md5.md5_ff(b,c,d,a,x[i+15],22,1236535329);a=FCore.Md5.md5_gg(a,b,c,d,x[i+1],5,-165796510);d=FCore.Md5.md5_gg(d,a,b,c,x[i+6],9,-1069501632);c=FCore.Md5.md5_gg(c,d,a,b,x[i+11],14,643717713);b=FCore.Md5.md5_gg(b,c,d,a,x[i+0],20,-373897302);a=FCore.Md5.md5_gg(a,b,c,d,x[i+5],5,-701558691);d=FCore.Md5.md5_gg(d,a,b,c,x[i+10],9,38016083);c=FCore.Md5.md5_gg(c,d,a,b,x[i+15],14,-660478335);b=FCore.Md5.md5_gg(b,c,d,a,x[i+4],20,-405537848);a=FCore.Md5.md5_gg(a,b,c,d,x[i+9],5,568446438);d=FCore.Md5.md5_gg(d,a,b,c,x[i+14],9,-1019803690);c=FCore.Md5.md5_gg(c,d,a,b,x[i+3],14,-187363961);b=FCore.Md5.md5_gg(b,c,d,a,x[i+8],20,1163531501);a=FCore.Md5.md5_gg(a,b,c,d,x[i+13],5,-1444681467);d=FCore.Md5.md5_gg(d,a,b,c,x[i+2],9,-51403784);c=FCore.Md5.md5_gg(c,d,a,b,x[i+7],14,1735328473);b=FCore.Md5.md5_gg(b,c,d,a,x[i+12],20,-1926607734);a=FCore.Md5.md5_hh(a,b,c,d,x[i+5],4,-378558);d=FCore.Md5.md5_hh(d,a,b,c,x[i+8],11,-2022574463);c=FCore.Md5.md5_hh(c,d,a,b,x[i+11],16,1839030562);b=FCore.Md5.md5_hh(b,c,d,a,x[i+14],23,-35309556);a=FCore.Md5.md5_hh(a,b,c,d,x[i+1],4,-1530992060);d=FCore.Md5.md5_hh(d,a,b,c,x[i+4],11,1272893353);c=FCore.Md5.md5_hh(c,d,a,b,x[i+7],16,-155497632);b=FCore.Md5.md5_hh(b,c,d,a,x[i+10],23,-1094730640);a=FCore.Md5.md5_hh(a,b,c,d,x[i+13],4,681279174);d=FCore.Md5.md5_hh(d,a,b,c,x[i+0],11,-358537222);c=FCore.Md5.md5_hh(c,d,a,b,x[i+3],16,-722521979);b=FCore.Md5.md5_hh(b,c,d,a,x[i+6],23,76029189);a=FCore.Md5.md5_hh(a,b,c,d,x[i+9],4,-640364487);d=FCore.Md5.md5_hh(d,a,b,c,x[i+12],11,-421815835);c=FCore.Md5.md5_hh(c,d,a,b,x[i+15],16,530742520);b=FCore.Md5.md5_hh(b,c,d,a,x[i+2],23,-995338651);a=FCore.Md5.md5_ii(a,b,c,d,x[i+0],6,-198630844);d=FCore.Md5.md5_ii(d,a,b,c,x[i+7],10,1126891415);c=FCore.Md5.md5_ii(c,d,a,b,x[i+14],15,-1416354905);b=FCore.Md5.md5_ii(b,c,d,a,x[i+5],21,-57434055);a=FCore.Md5.md5_ii(a,b,c,d,x[i+12],6,1700485571);d=FCore.Md5.md5_ii(d,a,b,c,x[i+3],10,-1894986606);c=FCore.Md5.md5_ii(c,d,a,b,x[i+10],15,-1051523);b=FCore.Md5.md5_ii(b,c,d,a,x[i+1],21,-2054922799);a=FCore.Md5.md5_ii(a,b,c,d,x[i+8],6,1873313359);d=FCore.Md5.md5_ii(d,a,b,c,x[i+15],10,-30611744);c=FCore.Md5.md5_ii(c,d,a,b,x[i+6],15,-1560198380);b=FCore.Md5.md5_ii(b,c,d,a,x[i+13],21,1309151649);a=FCore.Md5.md5_ii(a,b,c,d,x[i+4],6,-145523070);d=FCore.Md5.md5_ii(d,a,b,c,x[i+11],10,-1120210379);c=FCore.Md5.md5_ii(c,d,a,b,x[i+2],15,718787259);b=FCore.Md5.md5_ii(b,c,d,a,x[i+9],21,-343485551);a=FCore.Md5.safe_add(a,olda);b=FCore.Md5.safe_add(b,oldb);c=FCore.Md5.safe_add(c,oldc);d=FCore.Md5.safe_add(d,oldd)}return Array(a,b,c,d)},md5_cmn:function(q,a,b,x,s,t){return FCore.Md5.safe_add(FCore.Md5.bit_rol(FCore.Md5.safe_add(FCore.Md5.safe_add(a,q),FCore.Md5.safe_add(x,t)),s),b)},md5_ff:function(a,b,c,d,x,s,t){return FCore.Md5.md5_cmn((b&c)|((~b)&d),a,b,x,s,t)},md5_gg:function(a,b,c,d,x,s,t){return FCore.Md5.md5_cmn((b&d)|(c&(~d)),a,b,x,s,t)},md5_hh:function(a,b,c,d,x,s,t){return FCore.Md5.md5_cmn(b^c^d,a,b,x,s,t)},md5_ii:function(a,b,c,d,x,s,t){return FCore.Md5.md5_cmn(c^(b|(~d)),a,b,x,s,t)},core_hmac_md5:function(key,data){var bkey=FCore.Md5.str2binl(key);if(bkey.length>16){bkey=FCore.Md5.core_md5(bkey,key.length*FCore.Md5.__chrsz)}var ipad=Array(16),opad=Array(16);for(var i=0;i<16;i++){ipad[i]=bkey[i]^909522486;opad[i]=bkey[i]^1549556828}var hash=FCore.Md5.core_md5(ipad.concat(FCore.Md5.str2binl(data)),512+data.length*FCore.Md5.__chrsz);return FCore.Md5.core_md5(opad.concat(hash),512+128)},safe_add:function(x,y){var lsw=(x&65535)+(y&65535);var msw=(x>>16)+(y>>16)+(lsw>>16);return(msw<<16)|(lsw&65535)},bit_rol:function(num,cnt){return(num<<cnt)|(num>>>(32-cnt))},str2binl:function(str){var bin=Array();var mask=(1<<FCore.Md5.__chrsz)-1;for(var i=0;i<str.length*FCore.Md5.__chrsz;i+=FCore.Md5.__chrsz){bin[i>>5]|=(str.charCodeAt(i/FCore.Md5.__chrsz)&mask)<<(i%32)}return bin},binl2hex:function(binarray){var hex_tab=FCore.Md5.__hexcase?"0123456789ABCDEF":"0123456789abcdef";var str="";for(var i=0;i<binarray.length*4;i++){str+=hex_tab.charAt((binarray[i>>2]>>((i%4)*8+4))&15)+hex_tab.charAt((binarray[i>>2]>>((i%4)*8))&15)}return str},binl2b64:function(binarray){var tab="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";var str="";for(var i=0;i<binarray.length*4;i+=3){var triplet=(((binarray[i>>2]>>8*(i%4))&255)<<16)|(((binarray[i+1>>2]>>8*((i+1)%4))&255)<<8)|((binarray[i+2>>2]>>8*((i+2)%4))&255);for(var j=0;j<4;j++){if(i*8+j*6>binarray.length*32){str+=FCore.Md5.__b64pad}else{str+=tab.charAt((triplet>>6*(3-j))&63)}}}return str}};var FCore=FCore||{};FCore.Sha1={__hexcase:0,__b64pad:"",__chrsz:8,Encrypt:function(s){return FCore.Sha1.hex_sha1(s)},hex_sha1:function(s){return FCore.Sha1.binb2hex(FCore.Sha1.core_sha1(FCore.Sha1.str2binb(s),s.length*FCore.Sha1.__chrsz))},b64_sha1:function(s){return FCore.Sha1.binb2b64(FCore.Sha1.core_sha1(FCore.Sha1.str2binb(s),s.length*FCore.Sha1.__chrsz))},str_sha1:function(s){return FCore.Sha1.binb2str(FCore.Sha1.core_sha1(FCore.Sha1.str2binb(s),s.length*FCore.Sha1.__chrsz))},hex_hmac_sha1:function(key,data){return FCore.Sha1.binb2hex(FCore.Sha1.core_hmac_sha1(key,data))},b64_hmac_sha1:function(key,data){return FCore.Sha1.binb2b64(FCore.Sha1.core_hmac_sha1(key,data))},str_hmac_sha1:function(key,data){return FCore.Sha1.binb2str(FCore.Sha1.core_hmac_sha1(key,data))},core_sha1:function(x,len){x[len>>5]|=128<<(24-len%32);x[((len+64>>9)<<4)+15]=len;var w=Array(80);var a=1732584193;var b=-271733879;var c=-1732584194;var d=271733878;var e=-1009589776;for(var i=0;i<x.length;i+=16){var olda=a;var oldb=b;var oldc=c;var oldd=d;var olde=e;for(var j=0;j<80;j++){if(j<16){w[j]=x[i+j]}else{w[j]=FCore.Sha1.rol(w[j-3]^w[j-8]^w[j-14]^w[j-16],1)}var t=FCore.Sha1.safe_add(FCore.Sha1.safe_add(FCore.Sha1.rol(a,5),FCore.Sha1.sha1_ft(j,b,c,d)),FCore.Sha1.safe_add(FCore.Sha1.safe_add(e,w[j]),FCore.Sha1.sha1_kt(j)));e=d;d=c;c=FCore.Sha1.rol(b,30);b=a;a=t}a=FCore.Sha1.safe_add(a,olda);b=FCore.Sha1.safe_add(b,oldb);c=FCore.Sha1.safe_add(c,oldc);d=FCore.Sha1.safe_add(d,oldd);e=FCore.Sha1.safe_add(e,olde)}return Array(a,b,c,d,e)},sha1_ft:function(t,b,c,d){if(t<20){return(b&c)|((~b)&d)}if(t<40){return b^c^d}if(t<60){return(b&c)|(b&d)|(c&d)}return b^c^d},sha1_kt:function(t){return(t<20)?1518500249:(t<40)?1859775393:(t<60)?-1894007588:-899497514},core_hmac_sha1:function(key,data){var bkey=FCore.Sha1.str2binb(key);if(bkey.length>16){bkey=FCore.Sha1.core_sha1(bkey,key.length*FCore.Sha1.__chrsz)}var ipad=Array(16),opad=Array(16);for(var i=0;i<16;i++){ipad[i]=bkey[i]^909522486;opad[i]=bkey[i]^1549556828}var hash=FCore.Sha1.core_sha1(ipad.concat(FCore.Sha1.str2binb(data)),512+data.length*FCore.Sha1.__chrsz);return FCore.Sha1.core_sha1(opad.concat(hash),512+160)},safe_add:function(x,y){var lsw=(x&65535)+(y&65535);var msw=(x>>16)+(y>>16)+(lsw>>16);return(msw<<16)|(lsw&65535)},rol:function(num,cnt){return(num<<cnt)|(num>>>(32-cnt))},str2binb:function(str){var bin=Array();var mask=(1<<FCore.Sha1.__chrsz)-1;for(var i=0;i<str.length*FCore.Sha1.__chrsz;i+=FCore.Sha1.__chrsz){bin[i>>5]|=(str.charCodeAt(i/FCore.Sha1.__chrsz)&mask)<<(24-i%32)}return bin},binb2str:function(bin){var str="";var mask=(1<<FCore.Sha1.__chrsz)-1;for(var i=0;i<bin.length*32;i+=FCore.Sha1.__chrsz){str+=String.fromCharCode((bin[i>>5]>>>(24-i%32))&mask)}return str},binb2hex:function(binarray){var hex_tab=FCore.Sha1.__hexcase?"0123456789ABCDEF":"0123456789abcdef";var str="";for(var i=0;i<binarray.length*4;i++){str+=hex_tab.charAt((binarray[i>>2]>>((3-i%4)*8+4))&15)+hex_tab.charAt((binarray[i>>2]>>((3-i%4)*8))&15)}return str},binb2b64:function(binarray){var tab="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";var str="";for(var i=0;i<binarray.length*4;i+=3){var triplet=(((binarray[i>>2]>>8*(3-i%4))&255)<<16)|(((binarray[i+1>>2]>>8*(3-(i+1)%4))&255)<<8)|((binarray[i+2>>2]>>8*(3-(i+2)%4))&255);for(var j=0;j<4;j++){if(i*8+j*6>binarray.length*32){str+=FCore.Sha1.__b64pad}else{str+=tab.charAt((triplet>>6*(3-j))&63)}}}return str}};var FCore=FCore||{};FCore.Coordinate={__x_PI:3.141592653589793*3000/180,__PI:3.141592653589793,__a:6378245,__ee:0.006693421622965943,BD09toGCJ02:function(bd_lon,bd_lat){var x=bd_lon-0.0065;var y=bd_lat-0.006;var z=Math.sqrt(x*x+y*y)-2e-05*Math.sin(y*FCore.Coordinate.__x_PI);var theta=Math.atan2(y,x)-3e-06*Math.cos(x*FCore.Coordinate.__x_PI);var gg_lng=z*Math.cos(theta);var gg_lat=z*Math.sin(theta);return[gg_lng,gg_lat]},GCJ02toBD09:function(lng,lat){var z=Math.sqrt(lng*lng+lat*lat)+2e-05*Math.sin(lat*FCore.Coordinate.__x_PI);var theta=Math.atan2(lat,lng)+3e-06*Math.cos(lng*FCore.Coordinate.__x_PI);var bd_lng=z*Math.cos(theta)+0.0065;var bd_lat=z*Math.sin(theta)+0.006;return[bd_lng,bd_lat]},WGS84toGCJ02:function(lng,lat){if(!FCore.Coordinate.InChina(lng,lat)){return[lng,lat]}else{var dlat=FCore.Coordinate.transformlat(lng-105,lat-35);var dlng=FCore.Coordinate.transformlng(lng-105,lat-35);var radlat=lat/180*FCore.Coordinate.__PI;var magic=Math.sin(radlat);magic=1-FCore.Coordinate.__ee*magic*magic;var sqrtmagic=Math.sqrt(magic);dlat=(dlat*180)/((FCore.Coordinate.__a*(1-FCore.Coordinate.__ee))/(magic*sqrtmagic)*FCore.Coordinate.__PI);dlng=(dlng*180)/(FCore.Coordinate.__a/sqrtmagic*Math.cos(radlat)*FCore.Coordinate.__PI);var mglat=lat+dlat;var mglng=lng+dlng;return[mglng,mglat]}},GCJ02toWGS84:function(lng,lat){var dlat=FCore.Coordinate.transformlat(lng-105,lat-35);var dlng=FCore.Coordinate.transformlng(lng-105,lat-35);var radlat=lat/180*FCore.Coordinate.__PI;var magic=Math.sin(radlat);magic=1-FCore.Coordinate.__ee*magic*magic;var sqrtmagic=Math.sqrt(magic);dlat=(dlat*180)/((FCore.Coordinate.__a*(1-FCore.Coordinate.__ee))/(magic*sqrtmagic)*FCore.Coordinate.__PI);dlng=(dlng*180)/(FCore.Coordinate.__a/sqrtmagic*Math.cos(radlat)*FCore.Coordinate.__PI);mglat=lat+dlat;mglng=lng+dlng;return[lng*2-mglng,lat*2-mglat]},transformlat:function(lng,lat){var ret=-100+2*lng+3*lat+0.2*lat*lat+0.1*lng*lat+0.2*Math.sqrt(Math.abs(lng));ret+=(20*Math.sin(6*lng*FCore.Coordinate.__PI)+20*Math.sin(2*lng*FCore.Coordinate.__PI))*2/3;ret+=(20*Math.sin(lat*FCore.Coordinate.__PI)+40*Math.sin(lat/3*FCore.Coordinate.__PI))*2/3;ret+=(160*Math.sin(lat/12*FCore.Coordinate.__PI)+320*Math.sin(lat*FCore.Coordinate.__PI/30))*2/3;return ret},transformlng:function(lng,lat){var ret=300+lng+2*lat+0.1*lng*lng+0.1*lng*lat+0.1*Math.sqrt(Math.abs(lng));ret+=(20*Math.sin(6*lng*FCore.Coordinate.__PI)+20*Math.sin(2*lng*FCore.Coordinate.__PI))*2/3;ret+=(20*Math.sin(lng*FCore.Coordinate.__PI)+40*Math.sin(lng/3*FCore.Coordinate.__PI))*2/3;ret+=(150*Math.sin(lng/12*FCore.Coordinate.__PI)+300*Math.sin(lng/30*FCore.Coordinate.__PI))*2/3;return ret},InChina:function(lng,lat){var regionRectangle=[new FCore.Coordinate.Rectangle(49.2204,79.44620000000001,42.8899,96.33),new FCore.Coordinate.Rectangle(54.1415,109.6872,39.3742,135.0002),new FCore.Coordinate.Rectangle(42.8899,73.1246,29.5297,124.143255),new FCore.Coordinate.Rectangle(29.5297,82.9684,26.7186,97.0352),new FCore.Coordinate.Rectangle(29.5297,97.0253,20.414096,124.367395),new FCore.Coordinate.Rectangle(20.414096,107.975793,17.871542,111.744104)];var excludeRectangle=[new FCore.Coordinate.Rectangle(25.398623,119.921265,21.785006,122.497559),new FCore.Coordinate.Rectangle(22.284,101.8652,20.0988,106.665),new FCore.Coordinate.Rectangle(21.5422,106.4525,20.4878,108.051),new FCore.Coordinate.Rectangle(55.8175,109.0323,50.3257,119.127),new FCore.Coordinate.Rectangle(55.8175,127.4568,49.5574,137.0227),new FCore.Coordinate.Rectangle(44.8922,131.2662,42.5692,137.0227)];var relen=regionRectangle.langth;var exlen=excludeRectangle.langth;for(var i=0;i<relen;i++){if(regionRectangle[i].InRectangle(lng,lat)){for(var j=0;j<exlen;j++){if(excludeRectangle[j].InRectangle(lng,lat)){return false}}return true}}return false},Rectangle:function(lng1,lat1,lng2,lat2){this.lng1=lng1;this.lat1=lat1;this.lng2=lng2;this.lat2=lat2;this.West=Math.min(lng1,lng2);this.North=Math.max(lat1,lat2);this.East=Math.max(lng1,lng2);this.South=Math.min(lat1,lat2)}};FCore.Coordinate.Rectangle.prototype.InRectangle=function(lng,lat){return this.West<=lng&&this.East>=lng&&this.North>=lat&&this.South<=lat};var FCore=FCore||{};FCore.SlideTrans=function(container,data,options){this._timer=null;this._count=Math.abs(data.length);this._target=0;this._t=this._b=this._c=0;this.Index=0;this.SetOptions(options);this.Auto=!!this.options.Auto;this.Duration=Math.abs(this.options.Duration);this.Time=Math.abs(this.options.Time);this.Pause=Math.abs(this.options.Pause);this.Tween=this.options.Tween;this.onStart=this.options.onStart;this.onFinish=this.options.onFinish;var bVertical=!!this.options.Vertical;this._css=bVertical?"top":"left";this._container=document.getElementById(container);this.CreateDOM(data);var p=this.CurrentStyle(this._container).position;p=="relative"||p=="absolute"||(this._container.style.position="relative");this._container.style.overflow="hidden";this._slider.style.position="absolute";this.Change=this.options.Change?this.options.Change:(this._slider[bVertical?"offsetHeight":"offsetWidth"]/this._count)};FCore.SlideTrans.prototype={CreateDOM:function(data){var slider=this._container.id+"_slider";var number=this._container.id+"_number";var html=new Array();var tem="<td class='td_f'><a href='{link}' target='_blank'><img src='{img}' alt='{alt}'/><div class='f-slide-text'>{alt}</div></a></td>";html.push("<table id='"+slider+"' border='0' cellspacing='0' cellpadding='0'><tbody><tr>");for(var i=0;i<this._count;i++){var n=data[i];html.push(tem.replace("{link}",n.link).replace("{img}",n.img).replace(/\{alt\}/g,n.alt))}html.push("</tr></tbody></table><div id='"+number+"' class='f-slie-num-container'></div>");this._container.innerHTML=html.join("");this._slider=document.getElementById(slider);var nums=[];for(var i=0;i<this._count;i++){(nums[i]=document.getElementById(number).appendChild(document.createElement("a"))).innerHTML=i+1}var T=this;this.forEach(nums,function(o,i){o.onmouseover=function(){$(o).siblings().removeClass("f-slide-num-btn-over").end().addClass("f-slide-num-btn-over");this.Auto=false;T.Run(i)};o.onmouseout=function(){this.Auto=true;T.Run()}});this.forEach(nums,function(o,i){o.className=this.Index==i?"on":""});var ctn=$(this._container);var mbr=$("#"+number);ctn.find("img").css({"width":ctn.width(),"height":ctn.height(),"border":"0"});mbr.css({"margin-top":ctn.height()-25,"margin-left":ctn.width()-150});$(".f-slide-text").width(ctn.width())},SetOptions:function(options){this.options={Vertical:false,Auto:true,Change:0,Duration:50,Time:10,Pause:4000,onStart:function(){},onFinish:function(){},Tween:this.tween.Quart.easeOut};this.Extend(this.options,options||{})},Run:function(index){index==undefined&&(index=this.Index);index<0&&(index=this._count-1)||index>=this._count&&(index=0);this._target=-Math.abs(this.Change)*(this.Index=index);this._t=0;this._b=parseInt(this.CurrentStyle(this._slider)[this.options.Vertical?"top":"left"]);this._c=this._target-this._b;this.onStart();this.Move();$("#"+this._container.id+"_number a").removeClass("f-slide-num-btn-over").eq(index).addClass("f-slide-num-btn-over")},Move:function(){clearTimeout(this._timer);if(this._c&&this._t<this.Duration){this.MoveTo(Math.round(this.Tween(this._t++,this._b,this._c,this.Duration)));this._timer=setTimeout(this.Bind(this,this.Move),this.Time)}else{this.MoveTo(this._target);this.Auto&&(this._timer=setTimeout(this.Bind(this,this.Next),this.Pause))}},MoveTo:function(i){this._slider.style[this._css]=i+"px"},Next:function(){this.Run(++this.Index)},Previous:function(){this.Run(--this.Index)},Stop:function(){clearTimeout(this._timer);this.MoveTo(this._target)},Bind:function(object,fun){var args=Array.prototype.slice.call(arguments).slice(2);return function(){return fun.apply(object,args.concat(Array.prototype.slice.call(arguments)))}},CurrentStyle:function(element){return element.currentStyle||document.defaultView.getComputedStyle(element,null)},Extend:function(destination,source){for(var property in source){destination[property]=source[property]}return destination},forEach:function(array,callback,thisObject){if(array.forEach){array.forEach(callback,thisObject)}else{for(var i=0,len=array.length;i<len;i++){callback.call(thisObject,array[i],i,array)}}},tween:{Quart:{easeOut:function(t,b,c,d){return -c*((t=t/d-1)*t*t*t-1)+b}},Back:{easeOut:function(t,b,c,d,s){if(s==undefined){s=1.70158}return c*((t=t/d-1)*t*((s+1)*t+s)+1)+b}},Bounce:{easeOut:function(t,b,c,d){if((t/=d)<(1/2.75)){return c*(7.5625*t*t)+b}else{if(t<(2/2.75)){return c*(7.5625*(t-=(1.5/2.75))*t+0.75)+b}else{if(t<(2.5/2.75)){return c*(7.5625*(t-=(2.25/2.75))*t+0.9375)+b}else{return c*(7.5625*(t-=(2.625/2.75))*t+0.984375)+b}}}}}}};var FCore=FCore||{};FCore.Paging=function(id,current,rowCount,pageSize,showCount,urlTemp,callback){var a=new Array();var bg,en,offset,total;if(rowCount<1){return}if(current<1){current=1}if(pageSize<1){pageSize=1}total=Math.ceil(rowCount/pageSize);if(current>total){current=total}if(showCount<3){showCount=3}offset=parseInt(showCount/2);bg=current-offset;if(bg<1){bg=1}en=bg+showCount;if(en>total){en=total}if(en-bg<showCount&&total>showCount){bg=en-showCount}a.push(current>1?"<a class='f-paging-front' href='"+(current-1)+"'>&lt;</a>":"<span class='f-paging-front f-paging-disabled'>&lt;</span>");if(bg>3){a.push("<a href='"+urlTemp.replace(/\{p\}/,"1")+"'>1</a><a href='"+urlTemp.replace(/\{p\}/,"2")+"'>2</a>...")}for(var i=bg;i<=en;i++){if(i!=current){a.push("<a href='"+urlTemp.replace(/\{p\}/,i)+"'>"+i+"</a>")}else{a.push("<span class='f-paging-current'>"+current+"</span>")}if(i==total){break}}if(en<total-3){a.push("...<a href='"+urlTemp.replace(/\{p\}/,(total-1))+"'>"+(total-1)+"</a><a href='"+total+"'>"+total+"</a>")}a.push(current<total?"<a class='f-paging-next' href='"+urlTemp.replace(/\{p\}/,(current+1))+"'>&gt;</a>":"<span class='f-paging-next f-paging-disabled'>&gt;</span>");var obj=$("#"+id).addClass("f-paging-sabrosus").empty().append(a.join(""));if(callback){obj.find("a").click(function(){callback($(this).attr("href"));return false})}};var FCore=FCore||{};FCore.Menu={SetMenu:function(parm){var data=parm.data;parm.width=parm.width||100;parm.height=parm.height||"auto";if(data.length<1){return}if($("#__ctxMenu")[0]){$("#__ctxMenu").empty()}else{$("body").append("<div id='__ctxMenu'><ul></ul></div>")}var menu=$("<ul></ul>");var menuLen=data.length;var li=null;for(var i=0;i<menuLen;i++){li=$("<li>"+data[i].name+"</li>");if(data[i].callback!=null&&data[i].callback!=undefined){li.click(data[i].callback)}if(data[i].link!=null&&data[i].link!=undefined){li.bind("click",{link:data[i].link},function(event){document.location.href=event.data.link})}menu.append(li)}var style="<style type='text/css'>"+"#__ctxMenu{background:#eee;border:1px solid #aaa;position:absolute;display:none;overflow:hidden;width:"+parm.width+"px;}"+"#__ctxMenu li{line-height:20px;color:#444;border:1px solid #eee;cursor:pointer;padding-left:8px;}"+"#__ctxMenu li:hover{background:#ffc;color:#58F;border-color:#58F}"+"</style>";$("head").append(style);var M=$("#__ctxMenu");M.css("height",parm.height);M.append(menu);FCore.ContextMenuForbid();$(document).mouseup(function(event){if(event.button==2){M.css({display:"block",top:event.pageY,left:event.pageX})}else{M.css({display:"none"})}})}};var FCore=FCore||{};FCore.Alert={Normal:function(msg,title,fn){if($.isFunction(title)){fn=title;title=""}if(!title){title="消息"}$.messager.alert(title,msg,"",fn)},Success:function(msg,title,fn){if($.isFunction(title)){fn=title;title=""}if(!title){title="成功"}$.messager.alert(title,msg,"success",fn)},Error:function(msg,title,fn){if($.isFunction(title)){fn=title;title=""}if(!title){title="錯誤"}$.messager.alert(title,msg,"error",fn)},Info:function(msg,title,fn){if($.isFunction(title)){fn=title;title=""}if(!title){title="信息"}$.messager.alert(title,msg,"info",fn)},Question:function(msg,title,fn){if($.isFunction(title)){fn=title;title=""}if(!title){title="問題"}$.messager.alert(title,msg,"question",fn)},Warning:function(msg,title,fn){if($.isFunction(title)){fn=title;title=""}if(!title){title="警告"}$.messager.alert(title,msg,"warning",fn)}};var FCore=FCore||{};FCore.Dialog={UseUrl:function(id,url,txt,W,H,iconCls,data,callback){if($.isFunction(data)){callback=data;data={}}id="#dialog"+id;if($(id).length==0){$("body").append(' <div id="'+id.replace("#","")+'"><iframe style="border:0;" frameborder="0"/> </div>')}if(W==0){W=$(window).width()}if(H==0){H=$(window).height()}$(id).dialog({closed:true,iconCls:iconCls,modal:true,resizable:true,title:txt,width:W,height:H,onClose:function(){try{callback(data)}catch(e){}}});$d=$(id);$d.find("iframe").css({"width":"100%","height":H-50+"px"}).attr("src",url);$d.dialog("open")},UseUrlHasButton:function(id,url,txt,W,H,iconCls,okData,okFunction,callbackData,callback){if(W==0){W=$(window).width()}if(H==0){H=$(window).height()}if($.isFunction(okData)){callback=callbackData;callbackData=okFunction;okFunction=okData;okData={}}if($.isFunction(callbackData)){callback=callbackData;callbackData={}}id="dialog"+id;if($("#"+id).length==0){$("body").append(' <div id="'+id+'"><iframe id="ifm'+id+'"+ style="border:0;" frameborder="0"/> </div>')}$("#"+id).dialog({closed:true,iconCls:iconCls,modal:true,resizable:true,title:txt,width:W,height:H,onClose:function(){try{callback(callbackData)}catch(e){}},buttons:[{text:"OK",iconCls:"icon-ok",handler:function(){try{var el=document.getElementById("ifm"+id).contentWindow;okFunction(el,okData)}catch(e){}}},{text:"Cancel",handler:function(){$("#"+id).dialog("close")}}]});$d=$("#"+id);$d.find("iframe").css({"width":"100%","height":H-50+"px"}).attr("src",url);$d.dialog("open")},UseHtml:function(id,txt,content,W,H,iconCls,data,callback){if(W==0){W=$(window).width()}if(H==0){H=$(window).height()}if($.isFunction(data)){callback=data;data={}}id="#dialog"+id;if($(id).length==0){$("body").append('<div id="'+id.replace("#","")+'"></div>')}$(id).dialog({closed:true,iconCls:iconCls,modal:true,resizable:false,title:txt,width:W,height:H,onClose:function(){try{callback(data)}catch(e){}}});$d=$(id);$d.css("overflow","auto").html("").append(content);$d.dialog("open")},UseHtmlHasButton:function(id,txt,content,W,H,iconCls,okData,okFunction,callbackData,callback){if(W==0){W=$(window).width()}if(H==0){H=$(window).height()}if($.isFunction(okData)){callback=callbackData;callbackData=okFunction;okFunction=okData;okData={}}if($.isFunction(callbackData)){callback=callbackData;callbackData={}}id="#dialog"+id;if($(id).length==0){$("body").append('<div id="'+id.replace("#","")+'" style="min-height:100px;height:auto;_height:100px;"> </div>')}$(id).dialog({closed:true,iconCls:iconCls,modal:true,resizable:false,title:txt,width:W,height:H,onClose:function(){try{callback(callbackData)}catch(e){}},buttons:[{text:"OK",iconCls:"icon-ok",handler:function(){try{okFunction(okData)}catch(e){}}},{text:"Cancel",handler:function(){$("#"+id).dialog("close")}}]});$d=$(id);$d.html("").append(content);$d.dialog("open")},Close:function(id){$("#dialog"+id).dialog("close")},ParentClose:function(id){parent.FCore.Dialog.Close(id)}};var FCore=FCore||{};FCore.DataGrid=function(id,fnLoadData){this.dg=$("#"+id);this.load=fnLoadData;this.data=null;this.rowCount=0;this.footer=null;this.isInit=false;this.options={rownumbers:true,pagination:true,pageSize:20,pageList:[10,20,30,40,50],singleSelect:true,selectOnCheck:true,checkOnSelect:true,iconCls:null,toolbar:null,title:null,fit:true,columns:undefined,remoteSort:false,showFooter:true,rowStyler:null,onDblClickRow:function(){},onLoadSuccess:function(){},loadFilter:function(data){var dg=$(this);var opts=dg.datagrid("options");var pager=dg.datagrid("getPager");pager.pagination({onSelectPage:function(pageNum,pageSize){opts.pageNumber=pageNum;opts.pageSize=pageSize;pager.pagination("refresh",{pageNumber:pageNum,pageSize:pageSize});fnLoadData()}});return data}};this.editIndex=undefined;FCore.DataGrid.prototype.editBegin=function(){var row=this.getSelected();if(row){var index=this.dg.datagrid("getRowIndex",row);if(this.editIndex!=index){if(this.editEnd()){this.dg.datagrid("selectRow",index).datagrid("beginEdit",index);this.editIndex=index}else{this.dg.datagrid("selectRow",this.editIndex)}}}};FCore.DataGrid.prototype.editEnd=function(){if(this.editIndex==undefined){return true}if(this.dg.datagrid("validateRow",this.editIndex)){this.dg.datagrid("endEdit",this.editIndex);this.editIndex=undefined;return true}else{return false}};FCore.DataGrid.prototype.addRow=function(row){if(this.editIndex==undefined){this.dg.datagrid("appendRow",row?row:{});this.editIndex=this.dg.datagrid("getRows").length-1;this.dg.datagrid("selectRow",this.editIndex).datagrid("beginEdit",this.editIndex)}};FCore.DataGrid.prototype.insertRow=function(index,row){if(this.editIndex==undefined){this.dg.datagrid("insertRow",{index:0,row:row?row:{}});this.editIndex=0;this.dg.datagrid("selectRow",this.editIndex).datagrid("beginEdit",this.editIndex)}};FCore.DataGrid.prototype.updateRow=function(index,row){this.dg.datagrid("updateRow",{index:index,row:row})};FCore.DataGrid.prototype.removeRow=function(){var row=this.getSelected();if(row){var index=this.dg.datagrid("getRowIndex",row);this.dg.datagrid("deleteRow",index);this.accept()}};FCore.DataGrid.prototype.accept=function(){if(this.editEnd()){this.dg.datagrid("acceptChanges")}};FCore.DataGrid.prototype.reject=function(){this.dg.datagrid("rejectChanges");this.editIndex=undefined};FCore.DataGrid.prototype.init=function(){this.dg.datagrid(this.options);this.isInit=true};FCore.DataGrid.prototype.query=function(){this.dg.datagrid("options").pageNumber=1;this.dg.datagrid("getPager").pagination("refresh",{pageNumber:1});this.load()};FCore.DataGrid.prototype.update=function(data,rowCount){if(rowCount){this.rowCount=rowCount}if(data.total==undefined){this.data={"total":this.rowCount,"rows":data,"footer":this.footer}}else{this.data=$.extend({},data,{"footer":this.foor})}this.dg.datagrid("loadData",this.data)};FCore.DataGrid.prototype.getPageIndex=function(){return this.dg.datagrid("options").pageNumber};FCore.DataGrid.prototype.getPageSize=function(){return this.dg.datagrid("options").pageSize};FCore.DataGrid.prototype.getSelected=function(){return this.dg.datagrid("getSelected")};FCore.DataGrid.prototype.getSelections=function(){return this.dg.datagrid("getSelections")};FCore.DataGrid.prototype.getSelectionsField=function(field){var items=this.getSelections();var rst=new Array;if(items.length>0){$.each(items,function(i,v){rst.push(v[field])})}return rst.join()};FCore.DataGrid.prototype.getEditor=function(field){var rst=null;if(dg.editIndex!=undefined){rst=$(this.dg.datagrid("getEditor",{index:dg.editIndex,field:field}).target)}return rst};FCore.DataGrid.prototype.setFieldValue=function(field,value){this.dg.datagrid("getRows")[this.editIndex][field]=value}};var FCore=FCore||{};FCore.TreeGrid=function(id,fnLoadData){this.dg=$("#"+id);this.load=fnLoadData;this.data=null;this.rowCount=0;this.footer=null;this.isInit=false;this.options={animate:true,checkOnSelect:true,columns:undefined,fit:true,iconCls:null,idField:null,lines:true,method:"post",onContextMenu:null,pagination:true,pageSize:20,pageList:[10,20,30,40,50],rownumbers:true,rowStyler:null,remoteSort:false,showFooter:true,selectOnCheck:true,singleSelect:true,toolbar:null,title:null,treeField:null,toolbar:null,url:null,loadFilter:function(data){var dg=$(this);var opts=dg.treegrid("options");var pager=dg.treegrid("getPager");pager.pagination({onSelectPage:function(pageNum,pageSize){opts.pageNumber=pageNum;opts.pageSize=pageSize;pager.pagination("refresh",{pageNumber:pageNum,pageSize:pageSize});fnLoadData()}});return data}};this.editIndex=undefined;FCore.TreeGrid.prototype.editBegin=function(){if(this.editIndex!=undefined){this.dg.treegrid("select",this.editIndex);return}var row=this.dg.treegrid("getSelected");if(row){this.editIndex=row.Id;this.dg.treegrid("beginEdit",this.editIndex)}};FCore.TreeGrid.prototype.editEnd=function(){if(this.editIndex==undefined){return true}if(this.dg.treegrid("validateRow",this.editIndex)){this.dg.treegrid("endEdit",this.editIndex);this.editIndex=undefined;return true}else{return false}};FCore.TreeGrid.prototype.addRow=function(){var node=this.dg.treegrid("getSelected");var nodeId=node?node.Id||0:0;this.dg.treegrid("append",{parent:nodeId,data:[{Id:0,Name:"新建项"}]});this.editIndex=0;this.dg.treegrid("expandTo",this.editIndex).treegrid("select",this.editIndex).treegrid("beginEdit",this.editIndex)};FCore.TreeGrid.prototype.remove=function(){var node=this.getSelected();if(node){this.dg.treegrid("remove",node.Id);this.accept()}};FCore.TreeGrid.prototype.accept=function(){if(this.editEnd()){this.dg.treegrid("acceptChanges")}};FCore.TreeGrid.prototype.reject=function(){if(this.editIndex!=undefined){this.dg.treegrid("cancelEdit",this.editIndex);if(this.editIndex==0){this.remove()}this.editIndex=undefined}};FCore.TreeGrid.prototype.init=function(){this.dg.treegrid(this.options);this.isInit=true};FCore.TreeGrid.prototype.query=function(){this.dg.treegrid("options").pageNumber=1;this.dg.treegrid("getPager").pagination("refresh",{pageNumber:1});this.load()};FCore.TreeGrid.prototype.update=function(data,rowCount){if(rowCount){this.rowCount=rowCount}if(data.total==undefined){this.data={"total":this.rowCount,"rows":data,"footer":this.footer}}else{this.data=$.extend({},data,{"footer":this.foor})}this.dg.treegrid("loadData",this.data)};FCore.TreeGrid.prototype.getPageIndex=function(){return this.dg.treegrid("options").pageNumber};FCore.TreeGrid.prototype.getPageSize=function(){return this.dg.treegrid("options").pageSize};FCore.TreeGrid.prototype.getSelected=function(){var node=this.dg.treegrid("getSelected");var parent=this.dg.treegrid("getParent",node.id);node.parentId=parent?parent.id:0;return node};FCore.TreeGrid.prototype.getSelections=function(){return this.dg.treegrid("getSelections")};FCore.TreeGrid.prototype.getSelectionsField=function(field){var items=this.getSelections();var rst=new Array;if(items.length>0){$.each(items,function(i,v){rst.push(v[field])})}return rst.join()}};var FCore=FCore||{};FCore.DataGridFormatter={Date:function(val,row){return val?val.substring(0,10):""},YesNo:function(val,row){return"<span style='color:#"+(val=="1"?"080'>是":"888'>否")+"</span>"},Money:function(val,row){return"<div style='text-align:right'>"+(val?val.format("N",2):"0.00")+"</div>"},MoneySymbol:function(val,row){return"<div style='text-align:right'>"+(val?val.format("N",2,true):"0.00")+"</div>"},Enabled:function(val,row){return"<span style='color:#"+(val=="1"?"080'>已启用":"F00'>已禁用")+"</span>"}};var FCore=FCore||{};FCore.Stock={__urlStockHolders:"http://app.finance.ifeng.com/data/stock/gdhs_chart.php?symbol={stockCode}",__urlFundFlow:"http://app.finance.ifeng.com/hq/trade/stock_zijin_chart.php?code={stockCode}&begin_day={beginDay}&end_day={endDay}",__urlFundFlowRealTime:"http://app.finance.ifeng.com/hq/today_chart.php?type=zijin&code={stockCode}",Url_StockHolders:function(stockCode){return FCore.Stock.__urlStockHolders.replace("{stockCode}",stockCode)},Url_FundFlow:function(stockCode,beginDay,endDay){stockCode=FCore.Stock.AddMarketPrefix(stockCode);if(!beginDay){beginDay=""}if(!endDay){endDay=""}return FCore.Stock.__urlFundFlow.replace("{stockCode}",stockCode).replace("{beginDay}",beginDay).replace("{endDay}",endDay)},Url_FundFlowRealTime:function(stockCode){stockCode=FCore.Stock.AddMarketPrefix(stockCode);return FCore.Stock.__urlFundFlowRealTime.replace("{stockCode}",stockCode)},Url_FundFlowRealTime:function(stockCode){stockCode=FCore.Stock.AddMarketPrefix(stockCode);return FCore.Stock.__urlFundFlowRealTime.replace("{stockCode}",stockCode)},IsSH:function(stockCode){return stockCode.charAt(0)=="6"?true:false},AddMarketPrefix:function(stockCode){return stockCode.length==6?(FCore.Stock.IsSH(stockCode)?"sh":"sz")+stockCode:stockCode},AddMarketNumPrefix:function(stockCode){return stockCode.length==6?(FCore.Stock.IsSH(stockCode)?"0":"1")+stockCode:stockCode},Detail:function(stockCode,callback){var codes=stockCode.split(",");for(var i=codes.length-1;i>-1;i--){codes[i]=FCore.Stock.AddMarketNumPrefix(codes[i])}var url="http://api.money.126.net/data/feed/{codes},money.api".replace("{codes}",codes.join(","));$.ajax({type:"get",url:url,dataType:"jsonp",jsonp:"callbackparam",jsonpCallback:"_ntes_quote_callback",async:false,success:function(data){if(callback){callback(data)}},error:function(){console.log("error:"+url)}})}};